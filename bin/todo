#!/bin/sh

# best if it includes period
SUFFIX='.todo'

HELP="
USAGE: 
todo - edit your home todo file ($HOME/$SUFFIX)
"

if [ -z "$EDITOR" ]
then
    [ `which vi` ] && export EDITOR=vi 
    [ `which vim` ] && export EDITOR=vim
    if [ -z "$EDITOR" ]
    then
        echo "Seriously, not even vi? (export EDITOR=???)"
        exit 1
    fi
fi

if [ -z "$HOME" ]
then
    echo "What's your \$HOME? (export HOME=???)"
    exit 1
fi 

case "$1" in 
    '')
        exec $EDITOR $HOME/.todo
        ;;
    new)
        if [ -z "$2" ]
        then
            echo "Need a todo list name. (ex: todo new shop)"
            exit 1
        fi
        exec $EDITOR $HOME/$2.todo
        ;;
    list)
        exec cat $HOME/$2.todo
        ;;
    help|h)
        echo $HELP
        ;;
    conf)
        echo "TODO: eventually create the .vim syntax entries for hilighting"
        exit 0
        ;;
    *)
        echo "Sorry, not familiar with the command '$1'"
        exit 1
        ;;
esac
